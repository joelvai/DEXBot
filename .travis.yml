sudo: true
matrix:
  include:
  - os: linux
    language: python
    python: '3.6'
  - os: osx
    language: generic
    before_install:
    - python --version
    - brew upgrade python
install:
  - make install
script:
  - echo "@TODO - Running tests..."
  - pyinstaller --distpath dist/$TRAVIS_OS_NAME gui.spec
  - pyinstaller --distpath dist/$TRAVIS_OS_NAME cli.spec
before_deploy:
  - git config --local user.name "Travis"
  - git config --local user.email "travis@travis-ci.org"
  - git tag "$(date +'%Y%m%d%H%M%S')-$(git log --format=%h -1)"
  - tar -czvf dist/DEXBot-$TRAVIS_OS_NAME.tar.gz dist/$TRAVIS_OS_NAME/*
deploy:
  - provider: releases
    skip_cleanup: true
    api_key:
      secure: PZZcKcTkGCl850CojLQm4V9CgnvdJsVSTH2Ur3TIrUjDLqWu+LPwHhQjGp3oeM4SlrK0IE0IQqRmtiwMHYo+2s/wDtYh7ft87kUE5o07+5tv2cObOunZ/6qDlk8EunOFBFOUCaa15iyPtXNEJTd7/gSR0kNT+DTDivHwCLyNxJO0gQyRKl8gk9RngzM5AhJPAmb21C0rBEwkd+MWsf2rXT+3S2k/mDbZGFsYAKeduyvh64MU9PJzFpPGeyX8IsAeff+4H0UBtfg3lERqZRW6soxmrLwZ4D09vjjl4O6IZeOvDOR2KRe9Zzbdci+NlY+uGRKng05eKwc7Dnz+tjA+r4/nWZNXgcTKrfS35MQi/KPh1Yumcp5sbvmk5veBrSq1fNb1IZY3fujrS6PIogKTMWPGY5eq5INo8PmCgHTNEsvJcFTGLsPqTfjnQ9FpVpPt4zmEaqUP4ESxC65quJucH4sEpzbdFmz7mU2qmH4GHj0p6U0Ks4w1v+dJgwC167aDYJpZ64oh7FVQTQnvg5HPOZ4dP7DOM7Cj3lECWaKM+kO0QDzTdgoTklPzhr+rPgCAduVN3h6k5k+NhNkr4+REre8LUAfbBk9RxIFgMD8ZydueMXx21C2krOi5WDkI4ZvD2tA2pK053waaJ1ASDdRV+cqF2J12Z2VpaqT/o1rIKwM=
    file: dist/*.tar.gz
    file_glob: true
    on:
      tags: true
